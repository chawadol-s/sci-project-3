<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immune Hero: ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .health-bar {
            background: linear-gradient(90deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .virus-shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-600 to-blue-600">
    <!-- Game Container -->
    <div class="max-w-md mx-auto bg-white min-h-screen relative overflow-hidden">
        
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 relative">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-lg font-bold">üõ°Ô∏è Immune Hero</h1>
                    <p class="text-sm opacity-90">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</p>
                </div>
                <div class="text-right">
                    <div class="text-sm">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
                    <div class="w-20 bg-white bg-opacity-30 rounded-full p-1">
                        <div id="healthBar" class="health-bar w-full"></div>
                    </div>
                    <div class="text-xs mt-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
                </div>
            </div>
            
            <!-- Session Stats Bar -->
            <div id="sessionStats" class="mt-3 pt-3 border-t border-white border-opacity-30 hidden">
                <div class="flex justify-between items-center text-sm">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center">
                            <span class="text-yellow-300">üèÜ</span>
                            <span class="ml-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="sessionScore" class="font-bold">0</span></span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-blue-300">‚è±Ô∏è</span>
                            <span class="ml-1">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°: <span id="sessionTime" class="font-bold">0s</span></span>
                        </div>
                    </div>
                    <div class="text-xs opacity-75">
                        ‡πÄ‡∏Ñ‡∏™ <span id="sessionMission">1</span>/9
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="p-4">
            
            <!-- Story Introduction Screen -->
            <div id="storyIntro" class="slide-in text-center">
                <div class="bg-gradient-to-b from-blue-50 to-purple-50 rounded-xl p-6 mb-6">
                    <div class="text-6xl mb-4 pulse-animation">üè•</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô</h2>
                    
                    <div class="text-left bg-white p-4 rounded-lg mb-6 shadow-sm">
                        <p class="text-gray-700 mb-3">ü©∫ <strong>‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏´‡∏°‡∏≠‡πÉ‡∏´‡∏°‡πà</strong> ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏≥</p>
                        
                        <p class="text-gray-700 mb-3">üìö ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö <strong>‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô</strong> ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ 9 ‡∏£‡∏≤‡∏¢</p>
                        
                        <p class="text-gray-700 mb-3">‚è∞ ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏Ñ‡∏™‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</p>
                        
                        <p class="text-gray-700 mb-3">üèÜ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</strong> ‡πÅ‡∏•‡∏∞ <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</strong> ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</p>
                        
                        <div class="bg-yellow-100 p-3 rounded-lg mt-4">
                            <p class="text-yellow-800 text-sm">üí° <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</strong> ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏™‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô!</p>
                        </div>
                    </div>
                    
                    <button onclick="startGame()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg pulse-animation hover:from-blue-600 hover:to-purple-700 transition-all">
                        üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢
                    </button>
                </div>
            </div>
            
            <!-- Mission Progress Screen -->
            <div id="missionProgress" class="slide-in hidden">
                <div class="bg-white rounded-xl p-4 mb-4 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                        <h2 class="text-lg font-bold text-gray-800">üìã ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡∏≤</h2>
                        <div class="text-sm text-gray-600">‡πÄ‡∏Ñ‡∏™ <span id="currentMissionNum">1</span>/9</div>
                    </div>
                    
                    <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500" style="width: 11%"></div>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-2 text-center">
                        <div class="bg-blue-50 p-2 rounded-lg">
                            <div class="text-lg font-bold text-blue-600" id="totalScore">0</div>
                            <div class="text-xs text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                        </div>
                        <div class="bg-green-50 p-2 rounded-lg">
                            <div class="text-lg font-bold text-green-600" id="correctCount">0</div>
                            <div class="text-xs text-gray-600">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</div>
                        </div>
                        <div class="bg-yellow-50 p-2 rounded-lg">
                            <div class="text-lg font-bold text-yellow-600" id="avgTime">0</div>
                            <div class="text-xs text-gray-600">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
                        </div>
                    </div>
                </div>
                
                <div id="nextMissionCard" class="bg-gradient-to-r from-blue-100 to-purple-100 p-4 rounded-xl border-2 border-blue-300 mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div id="nextMissionIcon" class="text-3xl mr-3">üõ°Ô∏è</div>
                            <div>
                                <h3 id="nextMissionTitle" class="font-semibold text-gray-800">‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏≤</h3>
                                <p id="nextMissionDesc" class="text-sm text-gray-600">‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÇ‡∏à‡∏°‡∏ï‡∏µ! ‡πÉ‡∏ä‡πâ‡∏ã‡∏µ‡∏£‡∏±‡∏°‡∏î‡πà‡∏ß‡∏ô</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500">‡πÄ‡∏Ñ‡∏™‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</div>
                            <div class="text-lg">‚ñ∂Ô∏è</div>
                        </div>
                    </div>
                </div>
                
                <button onclick="startCurrentMission()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-4 rounded-xl font-bold text-lg hover:from-green-600 hover:to-blue-600 transition-all">
                    üè• ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
                </button>
            </div>

            <!-- Mission Game Screen -->
            <div id="missionGame" class="hidden">
                <div class="bg-white rounded-xl p-4 mb-4 shadow-sm">
                    <div class="flex items-center justify-between mb-3">
                        <div>
                            <h2 id="missionTitle" class="text-lg font-bold text-gray-800"></h2>
                            <p id="missionDescription" class="text-sm text-gray-600"></p>
                        </div>
                        <div class="text-center">
                            <div id="timer" class="text-2xl font-bold text-red-500 mb-1">30</div>
                            <div class="text-xs text-gray-500">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                            <div class="w-16 bg-gray-200 rounded-full h-2 mt-1">
                                <div id="timerBar" class="bg-red-500 h-2 rounded-full transition-all duration-1000" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Area -->
                <div id="gameArea" class="bg-gradient-to-b from-blue-50 to-blue-100 rounded-xl p-4 mb-4 min-h-64">
                    <!-- Dynamic content will be inserted here -->
                </div>

                <!-- Card Selection Area -->
                <div id="cardArea" class="mb-4">
                    <h3 class="font-semibold text-gray-700 mb-3">üÉè ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</h3>
                    <div id="cardContainer" class="grid grid-cols-2 gap-3">
                        <!-- Cards will be dynamically generated -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3">
                    <button id="backBtn" onclick="backToMissions()" class="flex-1 bg-gray-500 text-white py-3 rounded-lg font-semibold">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö
                    </button>
                    <button id="nextBtn" onclick="nextMission()" class="flex-1 bg-blue-500 text-white py-3 rounded-lg font-semibold hidden">
                        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
                    </button>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="resultsScreen" class="hidden text-center">
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <div id="resultIcon" class="text-6xl mb-4"></div>
                    <h2 id="resultTitle" class="text-2xl font-bold mb-2"></h2>
                    <p id="resultMessage" class="text-gray-600 mb-4"></p>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-blue-600" id="missionScore">0</div>
                            <div class="text-xs text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</div>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg">
                            <div class="text-lg font-bold text-yellow-600" id="timeUsed">0</div>
                            <div class="text-xs text-gray-600">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</div>
                        </div>
                    </div>
                    
                    <div id="educationalContent" class="bg-blue-50 p-4 rounded-lg mb-4 text-left">
                        <!-- Educational content will be inserted here -->
                    </div>
                    
                    <div class="flex gap-3">
                        <button id="continueBtn" onclick="continueToNext()" class="flex-1 bg-green-500 text-white px-4 py-3 rounded-lg font-semibold">
                            ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
                        </button>
                        <button onclick="backToProgress()" class="flex-1 bg-gray-500 text-white px-4 py-3 rounded-lg font-semibold">
                            ‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Final Results Screen -->
            <div id="finalResults" class="hidden text-center">
                <div class="bg-gradient-to-b from-yellow-50 to-orange-50 rounded-xl p-6 shadow-lg">
                    <div class="text-6xl mb-4">üèÜ</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß</h2>
                    
                    <div class="bg-white p-4 rounded-lg mb-4">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600" id="finalScore">0</div>
                                <div class="text-sm text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600" id="finalCorrect">0</div>
                                <div class="text-sm text-gray-600">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å/9</div>
                            </div>
                        </div>
                        
                        <div class="text-center mb-4">
                            <div class="text-2xl font-bold text-yellow-600" id="finalGrade">A</div>
                            <div class="text-sm text-gray-600">‡πÄ‡∏Å‡∏£‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</div>
                        </div>
                        
                        <div id="finalMessage" class="bg-blue-50 p-3 rounded-lg text-sm text-blue-800">
                            <!-- Final message will be inserted here -->
                        </div>
                    </div>
                    
                    <button onclick="restartGame()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:from-blue-600 hover:to-purple-700 transition-all">
                        üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>
        </div>

        <!-- Floating Health Status -->
        <div id="healthStatus" class="fixed bottom-4 right-4 bg-white rounded-full p-3 shadow-lg hidden">
            <div class="text-2xl pulse-animation" id="healthEmoji">üí™</div>
        </div>
    </div>

    <script>
        let currentMission = 1;
        let health = 100;
        let totalScore = 0;
        let correctAnswers = 0;
        let selectedCard = null;
        let missionStartTime = 0;
        let timerInterval = null;
        let timeRemaining = 30;
        let missionTimes = [];
        let gameStarted = false;

        const missionData = [
            {
                icon: "üõ°Ô∏è",
                title: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏≤",
                shortDesc: "‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÇ‡∏à‡∏°‡∏ï‡∏µ! ‡πÉ‡∏ä‡πâ‡∏ã‡∏µ‡∏£‡∏±‡∏°‡∏î‡πà‡∏ß‡∏ô"
            },
            {
                icon: "üçº",
                title: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡πÅ‡∏°‡πà",
                shortDesc: "‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏£‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏Å‡∏¥‡∏î"
            },
            {
                icon: "üêç",
                title: "‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ã‡∏µ‡∏£‡∏±‡∏°",
                shortDesc: "‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô"
            },
            {
                icon: "üß¨",
                title: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡πÄ‡∏≠‡∏á",
                shortDesc: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á"
            },
            {
                icon: "üíâ",
                title: "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô",
                shortDesc: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°"
            },
            {
                icon: "ü§ß",
                title: "‡πÇ‡∏£‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ",
                shortDesc: "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ"
            },
            {
                icon: "‚ö°",
                title: "‡πÇ‡∏£‡∏Ñ‡∏•‡∏π‡∏õ‡∏±‡∏™ (SLE)",
                shortDesc: "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á"
            },
            {
                icon: "ü¶†",
                title: "HIV ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠",
                shortDesc: "‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ CD4"
            },
            {
                icon: "üéØ",
                title: "‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ HIV",
                shortDesc: "‡πÅ‡∏¢‡∏Å‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á vs ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢"
            }
        ];

        const missions = {
            1: {
                title: "üõ°Ô∏è ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏≤",
                description: "‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏î‡πà‡∏ß‡∏ô",
                scenario: "ü¶† ‡πÑ‡∏ß‡∏£‡∏±‡∏™‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!",
                cards: [
                    { id: 1, name: "‡∏ã‡∏µ‡∏£‡∏±‡∏°‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ", icon: "üíâ", correct: true, description: "‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ" },
                    { id: 2, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô", icon: "ü¶†", correct: false, description: "‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ" },
                    { id: 3, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", icon: "üü°", correct: false, description: "‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÑ‡∏î‡πâ" },
                    { id: 4, name: "‡∏¢‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î", icon: "üíä", correct: false, description: "‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡πâ‡∏≤‡∏ô‡πÑ‡∏ß‡∏£‡∏±‡∏™" }
                ],
                education: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô"
            },
            2: {
                title: "üçº ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡πÅ‡∏°‡πà",
                description: "‡∏ó‡∏≤‡∏£‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡πà ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
                scenario: "üë∂ ‡∏ó‡∏≤‡∏£‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏à‡∏≠‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å",
                cards: [
                    { id: 1, name: "‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡πÅ‡∏°‡πà", icon: "üçº", correct: true, description: "‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡πà" },
                    { id: 2, name: "‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤", icon: "üíß", correct: false, description: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô" },
                    { id: 3, name: "‡∏ô‡∏°‡∏ú‡∏á", icon: "ü•õ", correct: false, description: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡πà" },
                    { id: 4, name: "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞", icon: "üíä", correct: false, description: "‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ó‡∏≤‡∏£‡∏Å" }
                ],
                education: "‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡πÅ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ IgA ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏£‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à"
            },
            3: {
                title: "üêç ‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏ã‡∏µ‡∏£‡∏±‡∏°",
                description: "‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ñ‡∏π‡∏Å‡∏á‡∏π‡∏û‡∏¥‡∏©‡∏Å‡∏±‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô",
                scenario: "üö® ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ñ‡∏π‡∏Å‡∏á‡∏π‡∏û‡∏¥‡∏©‡∏Å‡∏±‡∏î ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏©",
                cards: [
                    { id: 1, name: "‡∏ã‡∏µ‡∏£‡∏±‡∏°‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏á‡∏π", icon: "üíâ", correct: true, description: "‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏á‡∏π" },
                    { id: 2, name: "‡∏¢‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î", icon: "üíä", correct: false, description: "‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©" },
                    { id: 3, name: "‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡∏¥‡∏ö", icon: "üíß", correct: false, description: "‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©" },
                    { id: 4, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô", icon: "ü¶†", correct: false, description: "‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ" }
                ],
                education: "‡∏ã‡∏µ‡∏£‡∏±‡∏°‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏°‡∏µ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÄ‡∏≠‡∏á"
            },
            4: {
                title: "üß¨ ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡πÄ‡∏≠‡∏á",
                description: "‡πÄ‡∏à‡∏≠‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÄ‡∏≠‡∏á",
                scenario: "ü¶† ‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß",
                cards: [
                    { id: 1, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô", icon: "üíâ", correct: true, description: "‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ" },
                    { id: 2, name: "‡∏ã‡∏µ‡∏£‡∏±‡∏°", icon: "üß™", correct: false, description: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß" },
                    { id: 3, name: "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞", icon: "üíä", correct: false, description: "‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏π‡∏°‡∏¥" },
                    { id: 4, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", icon: "üü°", correct: false, description: "‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏û‡∏≤‡∏∞" }
                ],
                education: "‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡πÄ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏à‡∏î‡∏à‡∏≥‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÄ‡∏≠‡∏á ‡πÉ‡∏´‡πâ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß"
            },
            5: {
                title: "üíâ ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô",
                description: "‡πÄ‡∏î‡πá‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏ 1 ‡∏õ‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
                scenario: "üë¶ ‡πÄ‡∏î‡πá‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏ 1 ‡∏õ‡∏µ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î",
                cards: [
                    { id: 1, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô MMR", icon: "üíâ", correct: true, description: "‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏±‡∏î ‡∏Ñ‡∏≤‡∏á‡∏ó‡∏π‡∏° ‡∏´‡∏±‡∏î‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏±‡∏ô" },
                    { id: 2, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡πÑ‡∏Ç‡πâ‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà", icon: "ü¶†", correct: false, description: "‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏Ç‡πâ‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô" },
                    { id: 3, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", icon: "üü°", correct: false, description: "‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ" },
                    { id: 4, name: "‡∏¢‡∏≤‡∏•‡∏î‡πÑ‡∏Ç‡πâ", icon: "üå°Ô∏è", correct: false, description: "‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô" }
                ],
                education: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô MMR ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏î ‡∏Ñ‡∏≤‡∏á‡∏ó‡∏π‡∏° ‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏î‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏±‡∏ô ‡πÇ‡∏î‡∏¢‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏î‡∏à‡∏≥‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ"
            },
            6: {
                title: "ü§ß ‡πÇ‡∏£‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ",
                description: "‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏ô ‡∏à‡∏≤‡∏° ‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÑ‡∏ü ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ù‡∏∏‡πà‡∏ô",
                scenario: "üò∑ ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÅ‡∏û‡πâ‡∏ù‡∏∏‡πà‡∏ô ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏ô ‡∏à‡∏≤‡∏° ‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÑ‡∏ü",
                cards: [
                    { id: 1, name: "‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏Æ‡∏¥‡∏™‡∏ï‡∏≤‡∏°‡∏µ‡∏ô", icon: "üíä", correct: true, description: "‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ" },
                    { id: 2, name: "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞", icon: "üî¥", correct: false, description: "‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢" },
                    { id: 3, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô‡∏ã‡∏µ", icon: "üçä", correct: false, description: "‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡πâ" },
                    { id: 4, name: "‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡∏¥‡∏ö", icon: "üßÇ", correct: false, description: "‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ" }
                ],
                education: "‡πÇ‡∏£‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏Æ‡∏¥‡∏™‡∏ï‡∏≤‡∏°‡∏µ‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ"
            },
            7: {
                title: "‚ö° ‡πÇ‡∏£‡∏Ñ‡∏•‡∏π‡∏õ‡∏±‡∏™ (SLE)",
                description: "‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á",
                scenario: "üí• ‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á!",
                cards: [
                    { id: 1, name: "‡∏¢‡∏≤‡∏¢‡∏±‡∏ö‡∏¢‡∏±‡πâ‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô", icon: "üõ°Ô∏è", correct: true, description: "‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á" },
                    { id: 2, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô", icon: "üíâ", correct: false, description: "‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô" },
                    { id: 3, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", icon: "üü°", correct: false, description: "‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏£‡∏Ñ" },
                    { id: 4, name: "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞", icon: "üíä", correct: false, description: "‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÇ‡∏£‡∏Ñ" }
                ],
                education: "‡πÇ‡∏£‡∏Ñ‡∏•‡∏π‡∏õ‡∏±‡∏™‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏ó‡∏µ‡πà‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏ö‡∏≠‡∏î‡∏µ‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏¢‡∏≤‡∏¢‡∏±‡∏ö‡∏¢‡∏±‡πâ‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô"
            },
            8: {
                title: "ü¶† HIV ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠",
                description: "‡πÑ‡∏ß‡∏£‡∏±‡∏™ HIV ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡∏•‡∏•‡πå CD4 ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",
                scenario: "üìâ ‡πÄ‡∏ã‡∏•‡∏•‡πå CD4 ‡∏•‡∏î‡∏•‡∏á ‡πÑ‡∏ß‡∏£‡∏±‡∏™ HIV ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô",
                cards: [
                    { id: 1, name: "‡∏¢‡∏≤‡∏ï‡πâ‡∏≤‡∏ô‡πÑ‡∏ß‡∏£‡∏±‡∏™ ARV", icon: "üíä", correct: true, description: "‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡πÑ‡∏ß‡∏£‡∏±‡∏™" },
                    { id: 2, name: "‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞", icon: "üî¥", correct: false, description: "‡πÑ‡∏°‡πà‡∏Ü‡πà‡∏≤‡πÑ‡∏ß‡∏£‡∏±‡∏™" },
                    { id: 3, name: "‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô", icon: "üíâ", correct: false, description: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô HIV" },
                    { id: 4, name: "‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", icon: "üü°", correct: false, description: "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≤‡∏ô‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÑ‡∏î‡πâ" }
                ],
                education: "HIV ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡∏•‡∏•‡πå CD4 ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô ‡∏¢‡∏≤ ARV ‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏ã‡∏•‡∏•‡πå CD4"
            },
            9: {
                title: "üéØ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ HIV",
                description: "‡πÅ‡∏¢‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ HIV",
                scenario: "ü§î ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏´‡∏ô‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏¥‡∏î HIV ‡∏ö‡πâ‡∏≤‡∏á?",
                type: "drag_drop",
                activities: [
                    { name: "‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πá‡∏°‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô", icon: "üíâ", risk: true },
                    { name: "‡∏à‡∏±‡∏ö‡∏°‡∏∑‡∏≠", icon: "ü§ù", risk: false },
                    { name: "‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏î", icon: "ü©∏", risk: true },
                    { name: "‡∏Å‡∏≠‡∏î", icon: "ü§ó", risk: false },
                    { name: "‡∏°‡∏µ‡πÄ‡∏û‡∏®‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢", icon: "‚ù§Ô∏è", risk: true },
                    { name: "‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô", icon: "üçö", risk: false }
                ],
                education: "HIV ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î ‡∏ô‡πâ‡∏≥‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÄ‡∏û‡∏®‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏±‡∏ö‡∏°‡∏∑‡∏≠ ‡∏Å‡∏≠‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô"
            }
        };

        function startGame() {
            gameStarted = true;
            document.getElementById('storyIntro').classList.add('hidden');
            document.getElementById('missionProgress').classList.remove('hidden');
            document.getElementById('sessionStats').classList.remove('hidden');
            updateProgressScreen();
            updateSessionStats();
        }

        function updateProgressScreen() {
            const progress = ((currentMission - 1) / 9) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentMissionNum').textContent = currentMission;
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('correctCount').textContent = correctAnswers;
            
            const avgTime = missionTimes.length > 0 ? 
                Math.round(missionTimes.reduce((a, b) => a + b, 0) / missionTimes.length) : 0;
            document.getElementById('avgTime').textContent = avgTime + 's';
            
            if (currentMission <= 9) {
                const missionInfo = missionData[currentMission - 1];
                document.getElementById('nextMissionIcon').textContent = missionInfo.icon;
                document.getElementById('nextMissionTitle').textContent = missionInfo.title;
                document.getElementById('nextMissionDesc').textContent = missionInfo.shortDesc;
            }
            
            updateSessionStats();
        }

        function updateSessionStats() {
            document.getElementById('sessionScore').textContent = totalScore;
            
            const totalTime = missionTimes.reduce((a, b) => a + b, 0);
            document.getElementById('sessionTime').textContent = totalTime + 's';
            
            document.getElementById('sessionMission').textContent = Math.max(1, currentMission - (missionTimes.length > 0 ? 0 : 1));
        }

        function startCurrentMission() {
            startMission(currentMission);
        }

        function startMission(missionId) {
            const mission = missions[missionId];
            
            document.getElementById('missionProgress').classList.add('hidden');
            document.getElementById('missionGame').classList.remove('hidden');
            
            document.getElementById('missionTitle').textContent = mission.title;
            document.getElementById('missionDescription').textContent = mission.description;
            
            // Start timer
            timeRemaining = 30;
            missionStartTime = Date.now();
            startTimer();
            
            // Setup game area
            const gameArea = document.getElementById('gameArea');
            
            if (mission.type === 'drag_drop') {
                // Special drag-drop game for HIV transmission
                gameArea.innerHTML = `
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2 pulse-animation">üéØ</div>
                        <p class="text-lg font-semibold text-gray-700">${mission.scenario.substring(2)}</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="bg-red-100 border-2 border-red-300 rounded-lg p-3 min-h-32" id="riskZone">
                            <h4 class="font-bold text-red-700 text-center mb-2">üö® ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h4>
                            <div class="min-h-20" id="riskItems"></div>
                        </div>
                        <div class="bg-green-100 border-2 border-green-300 rounded-lg p-3 min-h-32" id="safeZone">
                            <h4 class="font-bold text-green-700 text-center mb-2">‚úÖ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</h4>
                            <div class="min-h-20" id="safeItems"></div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-2">üìã ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h4>
                        <div class="grid grid-cols-2 gap-2" id="activities">
                            ${mission.activities.map(activity => `
                                <div class="bg-white p-2 rounded border cursor-move text-center activity-item" 
                                     data-risk="${activity.risk}" draggable="true">
                                    <div class="text-2xl">${activity.icon}</div>
                                    <div class="text-xs">${activity.name}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                setupDragDrop();
                document.getElementById('cardArea').classList.add('hidden');
            } else {
                // Regular card game
                gameArea.innerHTML = `
                    <div class="text-center">
                        <div class="text-4xl mb-4 pulse-animation">${mission.scenario.split(' ')[0]}</div>
                        <p class="text-lg font-semibold text-gray-700">${mission.scenario.substring(2)}</p>
                        <div class="mt-4 p-3 bg-yellow-100 rounded-lg">
                            <p class="text-sm text-yellow-800">‚ö†Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</p>
                        </div>
                    </div>
                `;
                
                // Setup cards
                const cardContainer = document.getElementById('cardContainer');
                cardContainer.innerHTML = '';
                document.getElementById('cardArea').classList.remove('hidden');
                
                mission.cards.forEach(card => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'card-hover bg-white p-4 rounded-lg border-2 border-gray-200 cursor-pointer text-center';
                    cardElement.onclick = () => selectCard(card);
                    cardElement.innerHTML = `
                        <div class="text-3xl mb-2">${card.icon}</div>
                        <h4 class="font-semibold text-sm">${card.name}</h4>
                        <p class="text-xs text-gray-500 mt-1">${card.description}</p>
                    `;
                    cardContainer.appendChild(cardElement);
                });
            }
            
            selectedCard = null;
        }

        function setupDragDrop() {
            const activities = document.querySelectorAll('.activity-item');
            const riskZone = document.getElementById('riskItems');
            const safeZone = document.getElementById('safeItems');
            
            activities.forEach(activity => {
                activity.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.outerHTML);
                    e.dataTransfer.setData('risk', e.target.dataset.risk);
                });
            });
            
            [riskZone, safeZone].forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('bg-opacity-50');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('bg-opacity-50');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('bg-opacity-50');
                    
                    const itemHTML = e.dataTransfer.getData('text/plain');
                    const isRisk = e.dataTransfer.getData('risk') === 'true';
                    const isRiskZone = zone.id === 'riskItems';
                    
                    // Create new element
                    const newItem = document.createElement('div');
                    newItem.innerHTML = itemHTML;
                    const item = newItem.firstChild;
                    item.classList.remove('cursor-move');
                    item.classList.add('mb-1');
                    
                    // Add visual feedback
                    if (isRisk === isRiskZone) {
                        item.classList.add('border-green-500', 'bg-green-50');
                    } else {
                        item.classList.add('border-red-500', 'bg-red-50');
                    }
                    
                    zone.appendChild(item);
                    
                    // Remove from activities
                    const originalItem = document.querySelector(`[data-risk="${isRisk}"]`);
                    if (originalItem && originalItem.parentNode.id === 'activities') {
                        originalItem.remove();
                    }
                    
                    // Check if all items are placed
                    if (document.querySelectorAll('#activities .activity-item').length === 0) {
                        setTimeout(() => checkDragDropResult(), 500);
                    }
                });
            });
        }

        function checkDragDropResult() {
            clearInterval(timerInterval);
            const timeUsed = 30 - timeRemaining;
            
            const mission = missions[currentMission];
            let correct = 0;
            let total = mission.activities.length;
            
            // Check risk zone
            const riskItems = document.querySelectorAll('#riskItems .activity-item');
            riskItems.forEach(item => {
                if (item.dataset.risk === 'true') correct++;
            });
            
            // Check safe zone
            const safeItems = document.querySelectorAll('#safeItems .activity-item');
            safeItems.forEach(item => {
                if (item.dataset.risk === 'false') correct++;
            });
            
            const isCorrect = correct === total;
            showResult(isCorrect, false, timeUsed);
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeRemaining--;
                document.getElementById('timer').textContent = timeRemaining;
                
                const percentage = (timeRemaining / 30) * 100;
                document.getElementById('timerBar').style.width = percentage + '%';
                
                // Change color based on time remaining
                const timerBar = document.getElementById('timerBar');
                const timer = document.getElementById('timer');
                if (timeRemaining <= 10) {
                    timerBar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                    timer.className = 'text-2xl font-bold text-red-500 mb-1';
                } else if (timeRemaining <= 20) {
                    timerBar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                    timer.className = 'text-2xl font-bold text-yellow-500 mb-1';
                } else {
                    timerBar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                    timer.className = 'text-2xl font-bold text-green-500 mb-1';
                }
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    showResult(false, true); // timeout
                }
            }, 1000);
        }

        function calculateScore(isCorrect, timeUsed) {
            if (!isCorrect) return 0;
            
            const baseScore = 1000;
            const timeBonus = Math.max(0, (30 - timeUsed) * 20); // 20 points per second saved
            return baseScore + timeBonus;
        }

        function selectCard(card) {
            selectedCard = card;
            clearInterval(timerInterval);
            
            const timeUsed = 30 - timeRemaining;
            
            // Visual feedback
            const cards = document.querySelectorAll('#cardContainer > div');
            cards.forEach(c => c.classList.remove('border-blue-500', 'bg-blue-50'));
            
            event.target.closest('div').classList.add('border-blue-500', 'bg-blue-50');
            
            // Show result immediately
            setTimeout(() => {
                showResult(card.correct, false, timeUsed);
            }, 500);
        }

        function showResult(isCorrect, isTimeout = false, timeUsed = 30) {
            const mission = missions[currentMission];
            
            document.getElementById('missionGame').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            const missionScore = calculateScore(isCorrect, timeUsed);
            totalScore += missionScore;
            missionTimes.push(timeUsed);
            
            // Update session stats immediately
            updateSessionStats();
            
            if (isCorrect) {
                correctAnswers++;
                document.getElementById('resultIcon').textContent = 'üéâ';
                document.getElementById('resultTitle').textContent = '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!';
                document.getElementById('resultMessage').textContent = '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                updateHealthStatus('good');
            } else if (isTimeout) {
                document.getElementById('resultIcon').textContent = '‚è∞';
                document.getElementById('resultTitle').textContent = '‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!';
                document.getElementById('resultMessage').textContent = '‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô';
                health -= 20;
                updateHealthStatus('bad');
            } else {
                document.getElementById('resultIcon').textContent = 'üòî';
                document.getElementById('resultTitle').textContent = '‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞';
                document.getElementById('resultMessage').textContent = '‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°';
                health -= 20;
                updateHealthStatus('bad');
            }
            
            document.getElementById('missionScore').textContent = missionScore;
            document.getElementById('timeUsed').textContent = timeUsed + 's';
            
            document.getElementById('educationalContent').innerHTML = `
                <h4 class="font-semibold text-blue-800 mb-2">üí° ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</h4>
                <p class="text-sm">${mission.education}</p>
            `;
            
            // Show continue button or final results
            if (currentMission >= 9) {
                document.getElementById('continueBtn').textContent = 'üèÜ ‡∏î‡∏π‡∏ú‡∏•‡∏£‡∏ß‡∏°';
                document.getElementById('continueBtn').onclick = showFinalResults;
            } else {
                document.getElementById('continueBtn').textContent = '‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí';
                document.getElementById('continueBtn').onclick = continueToNext;
            }
        }

        function continueToNext() {
            currentMission++;
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('missionProgress').classList.remove('hidden');
            updateProgressScreen();
        }

        function backToProgress() {
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('missionProgress').classList.remove('hidden');
            updateProgressScreen();
        }

        function showFinalResults() {
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('finalResults').classList.remove('hidden');
            
            document.getElementById('finalScore').textContent = totalScore;
            document.getElementById('finalCorrect').textContent = correctAnswers;
            
            // Calculate grade
            const percentage = (correctAnswers / 9) * 100;
            let grade, message;
            
            if (percentage >= 90) {
                grade = 'A+';
                message = 'üåü ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏°‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß!';
            } else if (percentage >= 80) {
                grade = 'A';
                message = 'üëè ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏µ';
            } else if (percentage >= 70) {
                grade = 'B+';
                message = 'üëç ‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß! ‡∏•‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡∏∞';
            } else if (percentage >= 60) {
                grade = 'B';
                message = 'üìö ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°';
            } else {
                grade = 'C';
                message = 'üí™ ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ!';
            }
            
            document.getElementById('finalGrade').textContent = grade;
            document.getElementById('finalMessage').textContent = message;
        }

        function restartGame() {
            currentMission = 1;
            totalScore = 0;
            correctAnswers = 0;
            missionTimes = [];
            health = 100;
            
            document.getElementById('finalResults').classList.add('hidden');
            document.getElementById('storyIntro').classList.remove('hidden');
            document.getElementById('sessionStats').classList.add('hidden');
            
            // Reset session stats display
            document.getElementById('sessionScore').textContent = '0';
            document.getElementById('sessionTime').textContent = '0s';
            document.getElementById('sessionMission').textContent = '1';
        }

        function updateHealthStatus(status) {
            const healthBar = document.getElementById('healthBar');
            const healthEmoji = document.getElementById('healthEmoji');
            const healthStatus = document.getElementById('healthStatus');
            
            healthBar.style.width = health + '%';
            
            if (status === 'good') {
                healthEmoji.textContent = 'üí™';
                healthStatus.classList.remove('hidden');
                setTimeout(() => healthStatus.classList.add('hidden'), 2000);
            } else if (status === 'bad') {
                healthEmoji.textContent = 'üò∑';
                healthStatus.classList.remove('hidden');
                setTimeout(() => healthStatus.classList.add('hidden'), 2000);
            }
            
            if (health <= 0) {
                health = 0;
                healthEmoji.textContent = 'üíÄ';
            }
        }

        // Initialize game
        updateHealthStatus('normal');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a356a89052d334',t:'MTc1NDM2NTkxMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>